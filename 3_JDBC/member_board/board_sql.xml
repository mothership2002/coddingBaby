<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
<comment>Board Service SQL</comment>

<entry key="selectBoard">
SELECT BOARD_NO,BOARD_TITLE,CREATE_DATE,READ_COUNT,MEMBER_NM,
	   (SELECT COUNT(*) 
        FROM REPLY R
        WHERE R.BOARD_NO = B.BOARD_NO)"댓글 수"
FROM BOARD B
JOIN MEMBER USING(MEMBER_NO)
GROUP BY BOARD_NO,BOARD_TITLE,CREATE_DATE,READ_COUNT,MEMBER_NM
ORDER BY BOARD_NO DESC
</entry>

<entry key="selectOneBoard">
SELECT B.*,MEMBER_NM,B.MEMBER_NO
FROM BOARD B
JOIN MEMBER M ON (B.MEMBER_NO = M.MEMBER_NO)
WHERE BOARD_NO = ?
</entry>
<!-- 내꺼는 reply_member_no -->
<entry key="selectOneReply">
SELECT R.*, MEMBER_NM
FROM REPLY R
JOIN MEMBER M ON (R.MEMBER_NO = M.MEMBER_NO)
WHERE BOARD_NO = ?
ORDER BY CREATE_DATE ASC
</entry>

<entry key="readCount">
UPDATE BOARD
SET READ_COUNT = READ_COUNT + 1
WHERE BOARD_NO = ?
</entry>

<entry key="updateboard">
UPDATE BOARD
SET BOARD_TITLE = ?
,BOARD_CONTENT = ?
WHERE BOARD_NO = ?
</entry>

<entry key="deleteBoard">
DELETE FROM BOARD
WHERE BOARD_NO = ? 
</entry>

<entry key="deleteReply">
DELETE FROM REPLY
WHERE REPLY_NO = ?
</entry>

<entry key="updateReply">
UPDATE REPLY
SET REPLY_CONTENT = ?
WHERE REPLY_NO = ?
</entry>

<entry key="replyAdd">
INSERT INTO REPLY
VALUES(SEQ_REPLY_NO.NEXTVAL,?,DEFAULT,?,?)
</entry>

<entry key="insertBoard">
INSERT INTO BOARD
VALUES(SEQ_BOARD_NO.NEXTVAL,?,?,DEFAULT,DEFAULT,?)
</entry>

<entry key="searchBoard1">
SELECT BOARD_NO,BOARD_TITLE,CREATE_DATE,READ_COUNT,MEMBER_NM,
	   (SELECT COUNT(*) 
        FROM REPLY R
        WHERE R.BOARD_NO = B.BOARD_NO)"댓글 수"
FROM BOARD B
JOIN MEMBER USING(MEMBER_NO)
</entry>
<entry key="condition1">
WHERE BOARD_TITLE LIKE '%'||?||'%'
</entry>
<entry key="condition2">
WHERE BOARD_CONTENT LIKE '%'||?||'%'
</entry>
<entry key="condition3">
WHERE BOARD_TITLE LIKE '%'||?||'%'
OR BOARD_CONTENT LIKE '%'||?||'%'
</entry>
<entry key="condition4">
WHERE MEMBER_NM LIKE '%'||?||'%'
</entry>

<entry key="searchboard2">
ORDER BY BOARD_NO DESC
</entry>
</properties>
